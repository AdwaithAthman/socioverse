import{G as Lt,ai as w,r as i,a5 as Mt,a as Ze,u as fe,e as Ae,aj as It,Q as A,T as K,j as r,k as Ee,ak as zt,c as x,A as Fe,n as vt,o as $t,p as Bt,ad as Ht,C as Ve,d as Be,s as He,al as yt,U as bt,D as Je,a1 as Qe,am as Kt,f as Ut,h as Wt,i as Gt,l as Yt,an as Zt,ao as qt,ap as Vt,aq as Jt,ar as Xe,as as et,at as tt,au as nt,W as Qt,X as Xt,Y as en,av as rt,m as tn,aw as nn,E as st,ax as rn,ay as sn}from"./index-f946f455.js";import{u as on,I as wt}from"./ImageCropper-e8994465.js";function ot(e){return Lt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"}}]})(e)}function he(e,t,n,s){function o(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function f(v){try{l(s.next(v))}catch(j){c(j)}}function g(v){try{l(s.throw(v))}catch(j){c(j)}}function l(v){v.done?a(v.value):o(v.value).then(f,g)}l((s=s.apply(e,t||[])).next())})}function xe(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(l){return function(v){return g([l,v])}}function g(l){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,l[0]&&(n=0)),n;)try{if(s=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(v){l=[6,v],o=0}finally{s=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function at(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),o,a=[],c;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(f){c={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return a}function it(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,a;s<o;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var an=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function De(e,t){var n=ln(e);if(typeof n.path!="string"){var s=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof s=="string"&&s.length>0?s:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function ln(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var s=t.split(".").pop().toLowerCase(),o=an.get(s);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var cn=[".DS_Store","Thumbs.db"];function un(e){return he(this,void 0,void 0,function(){return xe(this,function(t){return Oe(e)&&fn(e.dataTransfer)?[2,gn(e.dataTransfer,e.type)]:dn(e)?[2,pn(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,mn(e)]:[2,[]]})})}function fn(e){return Oe(e)}function dn(e){return Oe(e)&&Oe(e.target)}function Oe(e){return typeof e=="object"&&e!==null}function pn(e){return Ke(e.target.files).map(function(t){return De(t)})}function mn(e){return he(this,void 0,void 0,function(){var t;return xe(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(s){return s.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(s){return De(s)})]}})})}function gn(e,t){return he(this,void 0,void 0,function(){var n,s;return xe(this,function(o){switch(o.label){case 0:return e.items?(n=Ke(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(hn))]):[3,2];case 1:return s=o.sent(),[2,lt(jt(s))];case 2:return[2,lt(Ke(e.files).map(function(a){return De(a)}))]}})})}function lt(e){return e.filter(function(t){return cn.indexOf(t.name)===-1})}function Ke(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var s=e[n];t.push(s)}return t}function hn(e){if(typeof e.webkitGetAsEntry!="function")return ct(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Dt(t):ct(e)}function jt(e){return e.reduce(function(t,n){return it(it([],at(t),!1),at(Array.isArray(n)?jt(n):[n]),!1)},[])}function ct(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=De(t);return Promise.resolve(n)}function xn(e){return he(this,void 0,void 0,function(){return xe(this,function(t){return[2,e.isDirectory?Dt(e):vn(e)]})})}function Dt(e){var t=e.createReader();return new Promise(function(n,s){var o=[];function a(){var c=this;t.readEntries(function(f){return he(c,void 0,void 0,function(){var g,l,v;return xe(this,function(j){switch(j.label){case 0:if(f.length)return[3,5];j.label=1;case 1:return j.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return g=j.sent(),n(g),[3,4];case 3:return l=j.sent(),s(l),[3,4];case 4:return[3,6];case 5:v=Promise.all(f.map(xn)),o.push(v),a(),j.label=6;case 6:return[2]}})})},function(f){s(f)})}a()})}function vn(e){return he(this,void 0,void 0,function(){return xe(this,function(t){return[2,new Promise(function(n,s){e.file(function(o){var a=De(o,e.fullPath);n(a)},function(o){s(o)})})]})})}var yn=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),s=e.name||"",o=(e.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return n.some(function(c){var f=c.trim().toLowerCase();return f.charAt(0)==="."?s.toLowerCase().endsWith(f):f.endsWith("/*")?a===f.replace(/\/.*$/,""):o===f})}return!0};function ut(e){return jn(e)||wn(e)||Ct(e)||bn()}function bn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jn(e){if(Array.isArray(e))return Ue(e)}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(n),!0).forEach(function(s){Pt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){return Cn(e)||Pn(e,t)||Ct(e,t)||Dn()}function Dn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ct(e,t){if(e){if(typeof e=="string")return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}}function Ue(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Pn(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,c,f;try{for(n=n.call(e);!(o=(c=n.next()).done)&&(s.push(c.value),!(t&&s.length===t));o=!0);}catch(g){a=!0,f=g}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw f}}return s}}function Cn(e){if(Array.isArray(e))return e}var En="file-invalid-type",Fn="file-too-large",An="file-too-small",On="too-many-files",Nn=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:En,message:"File type must be ".concat(n)}},pt=function(t){return{code:Fn,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},mt=function(t){return{code:An,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Sn={code:On,message:"Too many files"};function Et(e,t){var n=e.type==="application/x-moz-file"||yn(e,t);return[n,n?null:Nn(t)]}function Ft(e,t,n){if(ue(e.size))if(ue(t)&&ue(n)){if(e.size>n)return[!1,pt(n)];if(e.size<t)return[!1,mt(t)]}else{if(ue(t)&&e.size<t)return[!1,mt(t)];if(ue(n)&&e.size>n)return[!1,pt(n)]}return[!0,null]}function ue(e){return e!=null}function kn(e){var t=e.files,n=e.accept,s=e.minSize,o=e.maxSize,a=e.multiple,c=e.maxFiles,f=e.validator;return!a&&t.length>1||a&&c>=1&&t.length>c?!1:t.every(function(g){var l=Et(g,n),v=je(l,1),j=v[0],D=Ft(g,s,o),k=je(D,1),N=k[0],M=f?f(g):null;return j&&N&&!M})}function Ne(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ce(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function gt(e){e.preventDefault()}function _n(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Tn(e){return e.indexOf("Edge/")!==-1}function Rn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return _n(e)||Tn(e)}function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return t.some(function(f){return!Ne(s)&&f&&f.apply(void 0,[s].concat(a)),Ne(s)})}}function Ln(){return"showOpenFilePicker"in window}function Mn(e){if(ue(e)){var t=Object.entries(e).filter(function(n){var s=je(n,2),o=s[0],a=s[1],c=!0;return At(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every(Ot))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,s){var o=je(s,2),a=o[0],c=o[1];return dt(dt({},n),{},Pt({},a,c))},{});return[{description:"Files",accept:t}]}return e}function In(e){if(ue(e))return Object.entries(e).reduce(function(t,n){var s=je(n,2),o=s[0],a=s[1];return[].concat(ut(t),[o],ut(a))},[]).filter(function(t){return At(t)||Ot(t)}).join(",")}function zn(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function $n(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function At(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ot(e){return/^.*\.[\w]+$/.test(e)}var Bn=["children"],Hn=["open"],Kn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Un=["refKey","onChange","onClick"];function Wn(e){return Zn(e)||Yn(e)||Nt(e)||Gn()}function Gn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zn(e){if(Array.isArray(e))return We(e)}function $e(e,t){return Jn(e)||Vn(e,t)||Nt(e,t)||qn()}function qn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(e,t){if(e){if(typeof e=="string")return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}}function We(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Vn(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,c,f;try{for(n=n.call(e);!(o=(c=n.next()).done)&&(s.push(c.value),!(t&&s.length===t));o=!0);}catch(g){a=!0,f=g}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw f}}return s}}function Jn(e){if(Array.isArray(e))return e}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(s){Ge(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){if(e==null)return{};var n=Qn(e,t),s,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Qn(e,t){if(e==null)return{};var n={},s=Object.keys(e),o,a;for(a=0;a<s.length;a++)o=s[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var qe=i.forwardRef(function(e,t){var n=e.children,s=Se(e,Bn),o=kt(s),a=o.open,c=Se(o,Hn);return i.useImperativeHandle(t,function(){return{open:a}},[a]),Mt.createElement(i.Fragment,null,n(C(C({},c),{},{open:a})))});qe.displayName="Dropzone";var St={disabled:!1,getFilesFromEvent:un,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};qe.defaultProps=St;qe.propTypes={children:w.func,accept:w.objectOf(w.arrayOf(w.string)),multiple:w.bool,preventDropOnDocument:w.bool,noClick:w.bool,noKeyboard:w.bool,noDrag:w.bool,noDragEventsBubbling:w.bool,minSize:w.number,maxSize:w.number,maxFiles:w.number,disabled:w.bool,getFilesFromEvent:w.func,onFileDialogCancel:w.func,onFileDialogOpen:w.func,useFsAccessApi:w.bool,autoFocus:w.bool,onDragEnter:w.func,onDragLeave:w.func,onDragOver:w.func,onDrop:w.func,onDropAccepted:w.func,onDropRejected:w.func,onError:w.func,validator:w.func};var Ye={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function kt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=C(C({},St),e),n=t.accept,s=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,c=t.minSize,f=t.multiple,g=t.maxFiles,l=t.onDragEnter,v=t.onDragLeave,j=t.onDragOver,D=t.onDrop,k=t.onDropAccepted,N=t.onDropRejected,M=t.onFileDialogCancel,$=t.onFileDialogOpen,Y=t.useFsAccessApi,U=t.autoFocus,ne=t.preventDropOnDocument,Z=t.noClick,S=t.noKeyboard,q=t.noDrag,E=t.noDragEventsBubbling,I=t.onError,W=t.validator,L=i.useMemo(function(){return In(n)},[n]),X=i.useMemo(function(){return Mn(n)},[n]),V=i.useMemo(function(){return typeof $=="function"?$:xt},[$]),ee=i.useMemo(function(){return typeof M=="function"?M:xt},[M]),F=i.useRef(null),_=i.useRef(null),te=i.useReducer(Xn,Ye),de=$e(te,2),se=de[0],T=de[1],ve=se.isFocused,pe=se.isFileDialogActive,B=i.useRef(typeof window<"u"&&window.isSecureContext&&Y&&Ln()),oe=function(){!B.current&&pe&&setTimeout(function(){if(_.current){var p=_.current.files;p.length||(T({type:"closeDialog"}),ee())}},300)};i.useEffect(function(){return window.addEventListener("focus",oe,!1),function(){window.removeEventListener("focus",oe,!1)}},[_,pe,ee,B]);var G=i.useRef([]),ae=function(p){F.current&&F.current.contains(p.target)||(p.preventDefault(),G.current=[])};i.useEffect(function(){return ne&&(document.addEventListener("dragover",gt,!1),document.addEventListener("drop",ae,!1)),function(){ne&&(document.removeEventListener("dragover",gt),document.removeEventListener("drop",ae))}},[F,ne]),i.useEffect(function(){return!s&&U&&F.current&&F.current.focus(),function(){}},[F,U,s]);var z=i.useCallback(function(u){I?I(u):console.error(u)},[I]),J=i.useCallback(function(u){u.preventDefault(),u.persist(),ce(u),G.current=[].concat(Wn(G.current),[u.target]),Ce(u)&&Promise.resolve(o(u)).then(function(p){if(!(Ne(u)&&!E)){var O=p.length,R=O>0&&kn({files:p,accept:L,minSize:c,maxSize:a,multiple:f,maxFiles:g,validator:W}),H=O>0&&!R;T({isDragAccept:R,isDragReject:H,isDragActive:!0,type:"setDraggedFiles"}),l&&l(u)}}).catch(function(p){return z(p)})},[o,l,z,E,L,c,a,f,g,W]),m=i.useCallback(function(u){u.preventDefault(),u.persist(),ce(u);var p=Ce(u);if(p&&u.dataTransfer)try{u.dataTransfer.dropEffect="copy"}catch{}return p&&j&&j(u),!1},[j,E]),h=i.useCallback(function(u){u.preventDefault(),u.persist(),ce(u);var p=G.current.filter(function(R){return F.current&&F.current.contains(R)}),O=p.indexOf(u.target);O!==-1&&p.splice(O,1),G.current=p,!(p.length>0)&&(T({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ce(u)&&v&&v(u))},[F,v,E]),b=i.useCallback(function(u,p){var O=[],R=[];u.forEach(function(H){var we=Et(H,L),ge=$e(we,2),_e=ge[0],Te=ge[1],Re=Ft(H,c,a),Pe=$e(Re,2),Le=Pe[0],Me=Pe[1],Ie=W?W(H):null;if(_e&&Le&&!Ie)O.push(H);else{var ze=[Te,Me];Ie&&(ze=ze.concat(Ie)),R.push({file:H,errors:ze.filter(function(Rt){return Rt})})}}),(!f&&O.length>1||f&&g>=1&&O.length>g)&&(O.forEach(function(H){R.push({file:H,errors:[Sn]})}),O.splice(0)),T({acceptedFiles:O,fileRejections:R,type:"setFiles"}),D&&D(O,R,p),R.length>0&&N&&N(R,p),O.length>0&&k&&k(O,p)},[T,f,L,c,a,g,D,k,N,W]),ie=i.useCallback(function(u){u.preventDefault(),u.persist(),ce(u),G.current=[],Ce(u)&&Promise.resolve(o(u)).then(function(p){Ne(u)&&!E||b(p,u)}).catch(function(p){return z(p)}),T({type:"reset"})},[o,b,z,E]),d=i.useCallback(function(){if(B.current){T({type:"openDialog"}),V();var u={multiple:f,types:X};window.showOpenFilePicker(u).then(function(p){return o(p)}).then(function(p){b(p,null),T({type:"closeDialog"})}).catch(function(p){zn(p)?(ee(p),T({type:"closeDialog"})):$n(p)?(B.current=!1,_.current?(_.current.value=null,_.current.click()):z(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):z(p)});return}_.current&&(T({type:"openDialog"}),V(),_.current.value=null,_.current.click())},[T,V,ee,Y,b,z,X,f]),y=i.useCallback(function(u){!F.current||!F.current.isEqualNode(u.target)||(u.key===" "||u.key==="Enter"||u.keyCode===32||u.keyCode===13)&&(u.preventDefault(),d())},[F,d]),P=i.useCallback(function(){T({type:"focus"})},[]),le=i.useCallback(function(){T({type:"blur"})},[]),ye=i.useCallback(function(){Z||(Rn()?setTimeout(d,0):d())},[Z,d]),re=function(p){return s?null:p},be=function(p){return S?null:re(p)},me=function(p){return q?null:re(p)},ce=function(p){E&&p.stopPropagation()},ke=i.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=u.refKey,O=p===void 0?"ref":p,R=u.role,H=u.onKeyDown,we=u.onFocus,ge=u.onBlur,_e=u.onClick,Te=u.onDragEnter,Re=u.onDragOver,Pe=u.onDragLeave,Le=u.onDrop,Me=Se(u,Kn);return C(C(Ge({onKeyDown:be(Q(H,y)),onFocus:be(Q(we,P)),onBlur:be(Q(ge,le)),onClick:re(Q(_e,ye)),onDragEnter:me(Q(Te,J)),onDragOver:me(Q(Re,m)),onDragLeave:me(Q(Pe,h)),onDrop:me(Q(Le,ie)),role:typeof R=="string"&&R!==""?R:"presentation"},O,F),!s&&!S?{tabIndex:0}:{}),Me)}},[F,y,P,le,ye,J,m,h,ie,S,q,s]),_t=i.useCallback(function(u){u.stopPropagation()},[]),Tt=i.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=u.refKey,O=p===void 0?"ref":p,R=u.onChange,H=u.onClick,we=Se(u,Un),ge=Ge({accept:L,multiple:f,type:"file",style:{display:"none"},onChange:re(Q(R,ie)),onClick:re(Q(H,_t)),tabIndex:-1},O,_);return C(C({},ge),we)}},[_,n,f,ie,s]);return C(C({},se),{},{isFocused:ve&&!s,getRootProps:ke,getInputProps:Tt,rootRef:F,inputRef:_,open:re(d)})}function Xn(e,t){switch(t.type){case"focus":return C(C({},e),{},{isFocused:!0});case"blur":return C(C({},e),{},{isFocused:!1});case"openDialog":return C(C({},Ye),{},{isFileDialogActive:!0});case"closeDialog":return C(C({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return C(C({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return C(C({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return C({},Ye);default:return e}}function xt(){}const er=()=>{const e=Ze(),t=fe(s=>s.auth.user),n=fe(s=>s.auth.accessToken);return on(async s=>await It(s),{onSuccess:s=>{e(Ae({user:{...t,coverPhoto:s.coverPhoto},accessToken:n}))}})},tr=()=>{const[e,t]=i.useState(null),[n,s]=i.useState(!1),o=er();i.useEffect(()=>{A.dismiss(),o.isLoading?A.warn("Uploading...",K):o.isSuccess?A.success("Cover photo updated successfully",K):o.isError&&A.error("Updation failed!",K)},[o.isLoading,o.isSuccess,o.isError]);const a=async D=>{if(D)try{const k=new FormData,N=new FileReader;N.onload=M=>{var $;if(($=M.target)!=null&&$.result){const Y=M.target.result,U=new Blob([Y],{type:D.type});k.append("file",U,"image.jpg"),o.mutate(k)}},N.readAsArrayBuffer(D)}catch(k){console.error("Upload error:",k)}},c=D=>{a(D),f()},f=()=>s(!n),g=i.useCallback(D=>{(D==null?void 0:D.length)===0?A.error("Invalid action!",K):(t(D[0]),s(!0))},[e]),{getRootProps:l,getInputProps:v,isDragActive:j}=kt({onDrop:g,maxFiles:1,accept:{"image/*":[]}});return r.jsxs(r.Fragment,{children:[r.jsx(Ee,{}),r.jsxs("div",{...l(),children:[r.jsx("input",{...v()}),!j&&r.jsxs("div",{className:" h-44 md:h-60 lg:h-80 px-1 cursor-pointer rounded-lg w-full bg-white lg:border-4 border-2 border-gray-500 border-dashed flex items-center justify-center gap-10",children:[r.jsx(zt,{className:"lg:text-9xl text-6xl text-gray-500"}),r.jsxs("div",{className:"flex flex-col justify-center items-start",children:[r.jsx("h1",{className:"lg:text-[1.125rem] text-base",children:"Drag the image here or click to select the file"}),r.jsx("p",{className:"text-gray-500 font-light lg:text-base text-sm",children:"Multiple files are not allowed"})]})]})]}),r.jsxs(x.Dialog,{open:n,size:"lg",handler:f,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[r.jsx(x.DialogHeader,{children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("div",{className:"text-2xl",children:"Cover Photo"}),r.jsx("div",{children:r.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:f})})]})}),r.jsx(x.DialogBody,{className:"lg:m-4 m-2",children:e?r.jsx("div",{className:"w-auto lg:h-[28rem] h-96 ",children:r.jsx(wt,{image:URL.createObjectURL(e),getImage:c,aspectRatio:4/1})}):" "})]})]})},nr=({id:e,ifOtherUser:t})=>{var m,h,b,ie;const n=fe(d=>{var y;return(y=d==null?void 0:d.auth)==null?void 0:y.user}),[s,o]=i.useState(null),[a,c]=i.useState(null),[f,g]=i.useState(!1),[l,v]=i.useState(null),[j,D]=i.useState(!1),[k,N]=i.useState(!1),[M,$]=i.useState(!1),[Y,U]=i.useState([]),[ne,Z]=i.useState([]),S=Ze(),q=vt();i.useEffect(()=>{const d=async()=>{if(n)e===(n==null?void 0:n._id)&&(o((n==null?void 0:n.coverPhoto)||null),c((n==null?void 0:n.dp)||null));else{const P=await y();e===(P==null?void 0:P._id)&&(P!=null&&P.coverPhoto&&o(P.coverPhoto),P!=null&&P.dp&&c(P.dp))}},y=async()=>{const{user:P}=await Be(),{accessToken:le}=He.getState().auth;return S(Ae({user:P,accessToken:le})),P};d()},[S,e,n]);const E=async d=>{try{const{otherUser:y}=await yt(d);v(y),y!=null&&y.coverPhoto?o(y.coverPhoto):o(null),y!=null&&y.dp?c(y.dp):c(null)}catch(y){if(bt(y)){const P=y;P.response&&P.response.status>=400&&P.response.status<=500}}};i.useEffect(()=>{var d;e!==(n==null?void 0:n._id)?(g(!0),t(!0),E(e),(d=n==null?void 0:n.following)!=null&&d.includes(e)?D(!0):D(!1)):(g(!1),t(!1))},[e,t,n]),i.useEffect(()=>{e&&$t(e).then(d=>{U(d.following)})},[e,k]),i.useEffect(()=>{e&&Bt(e).then(d=>{Z(d.followers)})},[e,M]);const[I,W]=i.useState(!1),L=()=>W(!I),[X,V]=i.useState(null),ee=async d=>{if(d)try{const y=new FileReader;y.onload=async P=>{var le;if((le=P.target)!=null&&le.result){const ye=new FormData,re=P.target.result,be=new Blob([re],{type:d.type});ye.append("file",be,"image.jpg");const me=qt(ye);await A.promise(me,{pending:"Image is uploading.....",success:"Successfully updated Profile Photo",error:"Failed to update Profile Photo"},K).then(async ce=>{if(ce){c(ce.dp);const{user:ke}=await Be();S(Ae({user:ke,accessToken:He.getState().auth.accessToken}))}})}},y.readAsArrayBuffer(d)}catch(y){console.error("Upload error:",y)}},F=d=>{ee(d),L()},_=d=>{d.target.files&&d.target.files.length>0&&(V(d.target.files[0]),W(!0))},te=()=>{A.dismiss(),A(r.jsx(Qe,{onDelete:()=>de(),message:"Are you sure you want to delete this DP?"}),K)},de=async()=>{(await Zt()).status==="success"?(A.dismiss(),A.success("DP deleted successfully",K),c(null)):(A.dismiss(),A.error("Error deleting the DP",K))},se=()=>s?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:s,className:"h-full rounded-lg w-full object-fit relative"}),!f&&r.jsx("div",{className:"absolute bottom-2 lg:bottom-4 right-4 lg:right-20",children:r.jsx("div",{className:"flex gap-3",children:r.jsx("div",{className:"flex justify-center items-center w-8 h-8 transition duration-300 ease-in-out bg-blue-gray-500 rounded-full cursor-pointer border-2 border-blue-gray-700 hover:border-red-700 hover:bg-white hover:border-3 group opacity-70 hover:opacity-100",children:r.jsx(Je,{className:"text-xl text-white group-hover:text-red-500",onClick:ve})})})})]}):f?r.jsx("div",{className:"h-full w-full bg-gray-300 rounded-lg"}):r.jsx(tr,{}),T=()=>a?r.jsxs("div",{className:"absolute -bottom-24 lg:left-14 p-4 hover:scale-105 group",children:[r.jsx("img",{className:"h-32 w-32 md:h-36 md:w-36 lg:h-40 lg:w-40 rounded-full border-4 border-white",src:a}),!f&&r.jsx("div",{className:"absolute bottom-7 left-16 md:left-[4.5rem] lg:left-[5rem]",children:r.jsx("div",{className:"flex gap-3",children:r.jsx("div",{className:`flex justify-center items-center w-8 h-8 transition duration-300 ease-in-out bg-blue-gray-500 rounded-full cursor-pointer border-2 
                border-blue-gray-700 hover:border-red-700 hover:bg-white group-hover:border-3 opacity-0 group-hover:opacity-100`,children:r.jsx(Je,{className:"text-xl text-white hover:text-red-500",onClick:te})})})})]}):f?r.jsx("div",{className:"absolute -bottom-24 lg:left-14 p-4 ",children:r.jsx("div",{className:"h-32 w-32 md:h-36 md:w-36 lg:h-40 lg:w-40 rounded-full border-2 lg:border-4 border-gray-500 border-dashed bg-white m-2 flex items-center justify-center",children:r.jsx(ot,{className:"text-5xl text-gray-500 inline-flex"})})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"absolute -bottom-24 lg:left-14 p-4 ",children:[r.jsx("input",{type:"file",accept:"image/*",id:"image-input",className:"hidden",onChange:_}),r.jsx("label",{htmlFor:"image-input",className:"h-32 w-32 md:h-36 md:w-36 lg:h-40 lg:w-40 rounded-full border-4 border-gray-500 border-dashed bg-white m-2 flex items-center justify-center cursor-pointer",children:r.jsx(ot,{className:"text-5xl text-gray-500 inline-flex"})})]}),r.jsxs(x.Dialog,{open:I,size:"lg",handler:L,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[r.jsx(x.DialogHeader,{children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("div",{className:"text-2xl",children:"Profile Photo"}),r.jsx("div",{children:r.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:L})})]})}),r.jsx(x.DialogBody,{className:"lg:m-4 m-2",children:X?r.jsx("div",{className:"w-auto lg:h-[28rem] h-96 ",children:r.jsx(wt,{image:URL.createObjectURL(X),getImage:F,aspectRatio:4/4})}):" "})]})]}),ve=()=>{A.dismiss(),A(r.jsx(Qe,{onDelete:pe,message:"Are you sure you want to delete the cover photo?"}),K)},pe=async()=>{(await Kt()).status==="success"?(A.dismiss(),A.success("Cover photo deleted successfully",K),o(null)):(A.dismiss(),A.error("Error deleting cover photo",K))},B=()=>{q(`/profile/${n==null?void 0:n._id}/settings`)},oe=()=>{q(`/profile/${n==null?void 0:n._id}/edit-profile`)},G=async(d,y)=>{Ut(d).then(()=>{D(!1),A.dismiss(),A.success(`Following ${y}`,{...K,position:"bottom-left"}),S(Wt(d))})},ae=async(d,y)=>{Gt(d).then(()=>{D(!1),A.dismiss(),A.success(`Unfollowed ${y}`,{...K,position:"bottom-left"}),S(Yt(d))})},z=()=>N(!k),J=()=>$(!M);return r.jsxs(r.Fragment,{children:[r.jsx(Ee,{}),r.jsxs("div",{className:"relative w-full h-44 md:h-60 lg:h-80 px-1 lg:px-10",children:[se(),T(),r.jsxs("div",{className:"flex flex-col justify-between items-start absolute left-40 md:left-44 lg:left-64 -bottom-16",children:[r.jsxs("div",{className:"flex md:flex-row flex-col md:items-center md:gap-2",children:[r.jsx("h2",{className:"mt-2 lg:text-xl text-base font-bold text-black inline",children:f?l==null?void 0:l.name:n==null?void 0:n.name}),r.jsxs("p",{className:"text-sm font-light text-gray-600 md:mt-2",children:["@",f?l==null?void 0:l.username:n==null?void 0:n.username]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"lg:text-sm text-xs font-bold text-socioverse-500 cursor-pointer",onClick:z,children:[f?(m=l==null?void 0:l.following)==null?void 0:m.length:(h=n==null?void 0:n.following)==null?void 0:h.length," ","following"]}),r.jsxs("span",{className:"lg:text-sm text-xs font-bold text-socioverse-500 cursor-pointer",onClick:J,children:[f?(b=l==null?void 0:l.followers)==null?void 0:b.length:(ie=n==null?void 0:n.followers)==null?void 0:ie.length," ","followers"]})]})]}),r.jsx("div",{className:"md:flex items-center justify-between gap-5 absolute hidden md:-bottom-14 md:right-20",children:f?r.jsx(r.Fragment,{children:j?r.jsx(x.Button,{variant:"outlined",className:"rounded-full text-black border-black",onClick:()=>ae(e,l==null?void 0:l.name),children:"Following"}):r.jsx(x.Button,{className:"rounded-full bg-socioverse-500",onClick:()=>G(e,l==null?void 0:l.name),children:"Follow"})}):r.jsxs(r.Fragment,{children:[r.jsx(x.Button,{variant:"outlined",className:"rounded-full text-black border-black",onClick:B,children:"Settings"}),r.jsx(x.Button,{className:"rounded-full bg-socioverse-500",onClick:oe,children:"Edit Profile"})]})}),r.jsx("div",{className:"flex md:hidden absolute right-0 -bottom-14",children:r.jsxs(x.Menu,{placement:"bottom-start",children:[r.jsx(x.MenuHandler,{children:r.jsx(x.Button,{color:"blue-gray",size:"sm",variant:"text",className:"focus:outline-none",children:r.jsx(Ht,{className:"text-lg transition duration-150 ease-in-out hover:scale-105"})})}),r.jsx(x.MenuList,{className:"z-50",children:f?j?r.jsx(x.MenuItem,{onClick:()=>ae(e,l==null?void 0:l.name),className:"hover:bg-blue-gray-50",children:"Unfollow"}):r.jsx(x.MenuItem,{onClick:()=>G(e,l==null?void 0:l.name),className:"hover:bg-blue-gray-50",children:"Follow"}):r.jsxs(r.Fragment,{children:[r.jsx(x.MenuItem,{onClick:B,className:"hover:bg-blue-gray-50",children:"Settings"}),r.jsx(x.MenuItem,{onClick:oe,className:"hover:bg-blue-gray-50",children:"Edit Profile"})]})})]})})]}),r.jsxs(x.Dialog,{open:k,size:"xs",handler:z,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[r.jsx(x.DialogHeader,{children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Following List"}),r.jsx("div",{children:r.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:z})})]})}),r.jsx(Ee,{}),r.jsx(x.DialogBody,{className:"flex flex-col gap-4 lg:mx-4 lg:my-0 m-2 max-h-[20.5rem] overflow-y-scroll",children:r.jsx("div",{className:"flex flex-col gap-2 ",children:Y.map(d=>r.jsx("div",{className:"flex p-2 items-center justify-between transition duration-100 ease-in-out hover:shadow-md hover:scale-105 hover:rounded-lg",children:r.jsxs("div",{className:"mt-3 flex items-center space-x-2",onClick:()=>{z(),q(`/profile/${d._id}`)},children:[r.jsx("img",{className:"inline-block h-12 w-12 rounded-full",src:d.dp?d.dp:Ve.DEFAULT_IMG,alt:"user dp"}),r.jsxs("span",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[14px] font-medium text-gray-900",children:d==null?void 0:d.name}),r.jsx("span",{className:"text-[11px] font-medium text-gray-500",children:d.username?`@${d.username}`:"@ -"})]})]})},d._id))})}),r.jsx(x.DialogFooter,{children:void 0})]}),r.jsxs(x.Dialog,{open:M,size:"xs",handler:J,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[r.jsx(x.DialogHeader,{children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Followers List"}),r.jsx("div",{children:r.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:J})})]})}),r.jsx(Ee,{}),r.jsx(x.DialogBody,{className:"flex flex-col gap-4 lg:mx-4 lg:my-0 m-2 max-h-[20.5rem] overflow-y-scroll",children:r.jsx("div",{className:"flex flex-col gap-2 ",children:ne.map(d=>r.jsx("div",{className:"flex p-2 items-center justify-between transition duration-100 ease-in-out hover:shadow-md hover:scale-105 hover:rounded-lg",children:r.jsxs("div",{className:"mt-3 flex items-center space-x-2",onClick:()=>{J(),q(`/profile/${d._id}`)},children:[r.jsx("img",{className:"inline-block h-12 w-12 rounded-full",src:d.dp?d.dp:Ve.DEFAULT_IMG,alt:"user dp"}),r.jsxs("span",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[14px] font-medium text-gray-900",children:d==null?void 0:d.name}),r.jsx("span",{className:"text-[11px] font-medium text-gray-500",children:d.username?`@${d.username}`:"@ -"})]})]})},d._id))})}),r.jsx(x.DialogFooter,{children:void 0})]})]})},rr=({id:e,otherUser:t})=>{const n=fe(a=>{var c;return(c=a==null?void 0:a.auth)==null?void 0:c.user}),[s,o]=i.useState(null);return i.useEffect(()=>{t&&e&&yt(e).then(a=>{o(a.otherUser)})},[e,t]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col w-full h-fit justify-start shadow-lg rounded-lg px-5 py-5 border overflow-auto whitespace-normal",children:[r.jsx("h2",{className:" lg:text-xl text-base font-bold text-black inline",children:"Bio"}),r.jsx("p",{className:"text-sm font-light text-gray-600 mt-2",children:t&&s?s==null?void 0:s.bio:n==null?void 0:n.bio})]}),r.jsxs("div",{className:`flex flex-col w-full h-fit justify-start shadow-lg rounded-lg px-5 py-5 
      border mt-8 overflow-auto whitespace-normal`,children:[r.jsx("h2",{className:" lg:text-xl text-base font-bold text-black inline mb-3",children:"Contact"}),r.jsxs("div",{className:"flex flex-col items-start justify-start gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-gray-100/50 flex items-center justify-center",children:r.jsx(Vt,{className:"text-xl text-socioverse-500"})}),r.jsx("p",{className:"text-sm font-light text-gray-600",children:t&&s?s==null?void 0:s.email:n==null?void 0:n.email})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-gray-100/50 flex items-center justify-center",children:r.jsx(Jt,{className:"text-xl text-socioverse-500"})}),r.jsx("p",{className:"text-sm font-light text-gray-600",children:t&&s?s==null?void 0:s.phoneNumber:n==null?void 0:n.phoneNumber})]})]})]})]})};function sr({userId:e}){const t=fe(m=>{var h,b;return(b=(h=m==null?void 0:m.auth)==null?void 0:h.user)==null?void 0:b._id}),[n,s]=i.useState([]),[o,a]=i.useState([]),[c,f]=i.useState([]),[g,l]=i.useState([]),[v,j]=i.useState(null),[D,k]=i.useState(null),[N,M]=i.useState(null),[$,Y]=i.useState(null),[U,ne]=i.useState(null),[Z,S]=i.useState(!1),[q,E]=i.useState(!1),[I,W]=i.useState(1),[L,X]=i.useState(1),[V,ee]=i.useState(1),[F,_]=i.useState(1),[te,de]=i.useState("myPosts"),[se,T]=i.useState(!1),[ve,pe]=i.useState(!1),B=i.useRef(null);i.useEffect(()=>{e&&(X(1),a([]))},[e]),i.useEffect(()=>{S(!1)},[e]),i.useEffect(()=>{I===1&&e===t&&(E(!0),oe(),E(!1))},[I,e,t]),i.useEffect(()=>{L===1&&e&&e!==t&&(E(!0),G(),E(!1))},[L,e,t]),i.useEffect(()=>{v&&(s(n.filter(m=>m._id!==v)),f(c.filter(m=>m._id!==v)),l(g.filter(m=>m._id!==v)),j(null)),D&&k(null),N&&(s(n.map(m=>m._id===N._id?N:m)),f(c.map(m=>m._id===N._id?N:m)),l(g.map(m=>m._id===N._id?N:m)),M(null))},[v,D,N]),i.useEffect(()=>{$&&((async()=>{if($.action){const h=await rt($.postId);f([h.post,...c])}else f(c.filter(h=>h._id!==$.postId));Y(null)})(),Y(null)),U&&((async()=>{if(U.action){const h=await rt(U.postId);l([h.post,...g])}else l(g.filter(h=>h._id!==U.postId))})(),ne(null))},[$,U]),i.useEffect(()=>{S(!1)},[te]);const oe=async()=>{const m=await Xe(I);s(m.posts),W(I+1),m.posts.length<3&&S(!0)},G=async()=>{if(e&&e!==t){const m=await et(e,I);a(m.posts),X(L+1),m.posts.length<3&&S(!0)}},ae=async m=>{if(E(!0),m==="saved"&&!ve){const h=await tt(F);l(h.posts),_(F+1),pe(!0)}else if(m==="liked"&&!se){const h=await nt(V);f(h.posts),ee(V+1),T(!0)}E(!1)},z=[{label:"My Posts",value:"myPosts",desc:n.length>0?n:"No posts yet posted by the user"},{label:"Liked",value:"liked",desc:c.length>0?c:"No posts yet liked by the user"},{label:"Saved",value:"saved",desc:g.length>0?g:"No posts yet saved by the user"}],J=[{label:"Posts",value:"myPosts",desc:o.length>0?o:"No posts yet posted by the user"}];return i.useEffect(()=>{const m=new IntersectionObserver(async h=>{if(h[0].isIntersecting&&!q&&!Z){if(E(!0),e===t){if(te==="myPosts"){const b=await Xe(I);if(b.posts.length===0){E(!1),S(!0);return}s([...n,...b.posts]),W(I+1)}else if(te==="saved"){const b=await tt(F);if(b.posts.length===0){E(!1),S(!0);return}l([...g,...b.posts]),_(F+1)}else if(te==="liked"){const b=await nt(V);if(b.posts.length===0){E(!1),S(!0);return}f([...c,...b.posts]),ee(V+1)}}else{const b=e&&await et(e,L);if(b&&b.posts.length===0){E(!1),S(!0);return}b&&a([...o,...b.posts]),X(L+1)}E(!1)}},{threshold:1});return B.current&&m.observe(B.current),()=>{B.current&&m.unobserve(B.current)}},[q,I,Z,te,e,L]),r.jsxs(x.Tabs,{id:"custom-animation",value:"myPosts",children:[r.jsx(x.TabsHeader,{className:"sticky overflow-y-hidden",children:(t===e?z:J).map(({label:m,value:h})=>r.jsx(x.Tab,{value:h,onClick:()=>{ae(h),de(h)},children:r.jsx("h4",{className:"lg:text-base text-sm",children:m})},h))}),r.jsx(x.TabsBody,{animate:{initial:{y:250},mount:{y:0},unmount:{y:250}},className:"overflow-y-auto h-[80vh] no-scrollbar",children:(t===e?z:J).map(({value:m,desc:h})=>r.jsx(x.TabPanel,{value:m,className:"mx-auto",children:typeof h=="string"?r.jsx("h1",{className:"",children:h}):r.jsxs("div",{className:"flex flex-col gap-5 lg:w-[30rem] md:w-96 w-80 mx-auto",children:[h.map(b=>r.jsx(r.Fragment,{children:r.jsx(Qt,{postData:b,setDeletedPostId:j,setReportedPostId:k,setPostEdited:M,setSavedPostId:ne,setLikedPostId:Y},b._id+m)})),!Z&&r.jsx("div",{className:"w-full px-2 mt-5",children:r.jsx(Xt,{})}),Z&&r.jsx("div",{className:"text-center mt-5",children:" No posts..."}),r.jsx("div",{id:"sentinel",style:{height:"1px"},className:"mt-10 mb-20",ref:B,children:!Z&&r.jsx("img",{src:en,className:"w-20 h-20 mx-auto"})})]})},m))})]})}const or=()=>{const e=tn(),t=fe(c=>{var f;return(f=c==null?void 0:c.auth)==null?void 0:f.user}),{userId:n}=nn(),[s,o]=i.useState(!1),a=c=>{o(c)};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex flex-col justify-evenly items-start lg:mx-5 ",children:[r.jsx("div",{className:" no-scrollbar overflow-y-hidden w-full lg:h-[26rem] md:h-80 h-64",children:r.jsx(nr,{id:n||null,ifOtherUser:a})}),r.jsxs("div",{className:"flex flex-col md:flex-row items-start w-full gap-5 md:h-[85vh] lg:h-[90vh]",children:[r.jsx("div",{className:st("flex flex-col lg:px-10 px-2 w-full md:w-4/12 mt-8 sticky overflow-y-hidden md:h-[85vh]",{"hidden md:block":e.pathname===`/profile/${t==null?void 0:t._id}/settings`||e.pathname===`/profile/${t==null?void 0:t._id}/edit-profile`}),children:r.jsx(rr,{id:n||null,otherUser:s})}),r.jsx("div",{className:st("flex flex-col lg:pr-10 w-full md:w-8/12 mt-8 sticky overflow-y-auto",{"h-[55vh] md:h-[60vh]":e.pathname===`/profile/${t==null?void 0:t._id}/settings`},{"h-[95vh] md:h-[90vh]":e.pathname===`/profile/${t==null?void 0:t._id}/edit-profile`},{"h-[80vh]":e.pathname===`/profile/${t==null?void 0:t._id}`}),children:e.pathname===`/profile/${t==null?void 0:t._id}/settings`&&t?r.jsx(rn,{}):e.pathname===`/profile/${t==null?void 0:t._id}/edit-profile`&&t?r.jsx("div",{className:"mb-10 overflow-y-hidden",children:r.jsx(sn,{})}):r.jsx("div",{className:"overflow-y-hidden no-scrollbar",children:r.jsx(sr,{userId:n})})})]})]})})},lr=()=>{const e=fe(o=>o.auth),t=Ze(),n=vt();i.useEffect(()=>{e.isAuthenticated||s()||n("/error")},[e]);const s=async()=>{try{const{user:o}=await Be(),{accessToken:a}=He.getState().auth;return t(Ae({user:o,accessToken:a})),o}catch(o){if(bt(o)){const a=o;a.response&&a.response.status>=400&&a.response.status<=500&&n("/login")}}};return r.jsx(r.Fragment,{children:r.jsx(or,{})})};export{lr as default};
