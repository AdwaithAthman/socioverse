import{G as Tt,ag as w,r as i,a3 as Rt,a as xt,u as ge,d as $e,ah as Lt,Q as O,T as K,j as n,k as Ee,ai as Mt,b as x,A as Fe,m as It,n as zt,o as $t,ab as Bt,C as Ye,c as Ze,s as qe,aj as vt,P as Ht,z as Ve,$ as Je,ak as Kt,f as Ut,e as Wt,h as Gt,i as Yt,al as Zt,am as qt,an as Vt,ao as Jt,ap as Qe,aq as Xe,ar as et,as as tt,U as Qt,V as Xt,W as er,at as rt,l as tr,au as rr,D as nt,av as nr,aw as sr}from"./index-e5af359f.js";import{u as or,I as yt}from"./ImageCropper-dc4d60ab.js";function st(e){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"}}]})(e)}function he(e,t,r,s){function a(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(v){try{l(s.next(v))}catch(j){u(j)}}function g(v){try{l(s.throw(v))}catch(j){u(j)}}function l(v){v.done?o(v.value):a(v.value).then(f,g)}l((s=s.apply(e,t||[])).next())})}function xe(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(v){return g([l,v])}}function g(l){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(s=1,a&&(o=l[0]&2?a.return:l[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,l[1])).done)return o;switch(a=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(v){l=[6,v],a=0}finally{s=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ot(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),a,o=[],u;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(f){u={error:f}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(u)throw u.error}}return o}function at(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var ar=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Pe(e,t){var r=ir(e);if(typeof r.path!="string"){var s=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof s=="string"&&s.length>0?s:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function ir(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var s=t.split(".").pop().toLowerCase(),a=ar.get(s);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}var lr=[".DS_Store","Thumbs.db"];function cr(e){return he(this,void 0,void 0,function(){return xe(this,function(t){return Oe(e)&&ur(e.dataTransfer)?[2,mr(e.dataTransfer,e.type)]:fr(e)?[2,dr(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,pr(e)]:[2,[]]})})}function ur(e){return Oe(e)}function fr(e){return Oe(e)&&Oe(e.target)}function Oe(e){return typeof e=="object"&&e!==null}function dr(e){return Be(e.target.files).map(function(t){return Pe(t)})}function pr(e){return he(this,void 0,void 0,function(){var t;return xe(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(s){return s.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(s){return Pe(s)})]}})})}function mr(e,t){return he(this,void 0,void 0,function(){var r,s;return xe(this,function(a){switch(a.label){case 0:return e.items?(r=Be(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(gr))]):[3,2];case 1:return s=a.sent(),[2,it(bt(s))];case 2:return[2,it(Be(e.files).map(function(o){return Pe(o)}))]}})})}function it(e){return e.filter(function(t){return lr.indexOf(t.name)===-1})}function Be(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var s=e[r];t.push(s)}return t}function gr(e){if(typeof e.webkitGetAsEntry!="function")return lt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?wt(t):lt(e)}function bt(e){return e.reduce(function(t,r){return at(at([],ot(t),!1),ot(Array.isArray(r)?bt(r):[r]),!1)},[])}function lt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=Pe(t);return Promise.resolve(r)}function hr(e){return he(this,void 0,void 0,function(){return xe(this,function(t){return[2,e.isDirectory?wt(e):xr(e)]})})}function wt(e){var t=e.createReader();return new Promise(function(r,s){var a=[];function o(){var u=this;t.readEntries(function(f){return he(u,void 0,void 0,function(){var g,l,v;return xe(this,function(j){switch(j.label){case 0:if(f.length)return[3,5];j.label=1;case 1:return j.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return g=j.sent(),r(g),[3,4];case 3:return l=j.sent(),s(l),[3,4];case 4:return[3,6];case 5:v=Promise.all(f.map(hr)),a.push(v),o(),j.label=6;case 6:return[2]}})})},function(f){s(f)})}o()})}function xr(e){return he(this,void 0,void 0,function(){return xe(this,function(t){return[2,new Promise(function(r,s){e.file(function(a){var o=Pe(a,e.fullPath);r(o)},function(a){s(a)})})]})})}var vr=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),s=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return r.some(function(u){var f=u.trim().toLowerCase();return f.charAt(0)==="."?s.toLowerCase().endsWith(f):f.endsWith("/*")?o===f.replace(/\/.*$/,""):a===f})}return!0};function ct(e){return wr(e)||br(e)||Pt(e)||yr()}function yr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function br(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wr(e){if(Array.isArray(e))return He(e)}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ut(Object(r),!0).forEach(function(s){jt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){return Dr(e)||Pr(e,t)||Pt(e,t)||jr()}function jr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e,t){if(e){if(typeof e=="string")return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}}function He(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Pr(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],a=!0,o=!1,u,f;try{for(r=r.call(e);!(a=(u=r.next()).done)&&(s.push(u.value),!(t&&s.length===t));a=!0);}catch(g){o=!0,f=g}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw f}}return s}}function Dr(e){if(Array.isArray(e))return e}var Cr="file-invalid-type",Er="file-too-large",Fr="file-too-small",Or="too-many-files",Ar=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Cr,message:"File type must be ".concat(r)}},dt=function(t){return{code:Er,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},pt=function(t){return{code:Fr,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Nr={code:Or,message:"Too many files"};function Dt(e,t){var r=e.type==="application/x-moz-file"||vr(e,t);return[r,r?null:Ar(t)]}function Ct(e,t,r){if(ue(e.size))if(ue(t)&&ue(r)){if(e.size>r)return[!1,dt(r)];if(e.size<t)return[!1,pt(t)]}else{if(ue(t)&&e.size<t)return[!1,pt(t)];if(ue(r)&&e.size>r)return[!1,dt(r)]}return[!0,null]}function ue(e){return e!=null}function Sr(e){var t=e.files,r=e.accept,s=e.minSize,a=e.maxSize,o=e.multiple,u=e.maxFiles,f=e.validator;return!o&&t.length>1||o&&u>=1&&t.length>u?!1:t.every(function(g){var l=Dt(g,r),v=je(l,1),j=v[0],P=Ct(g,s,a),k=je(P,1),N=k[0],M=f?f(g):null;return j&&N&&!M})}function Ae(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ce(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function mt(e){e.preventDefault()}function kr(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function _r(e){return e.indexOf("Edge/")!==-1}function Tr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return kr(e)||_r(e)}function Q(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];return t.some(function(f){return!Ae(s)&&f&&f.apply(void 0,[s].concat(o)),Ae(s)})}}function Rr(){return"showOpenFilePicker"in window}function Lr(e){if(ue(e)){var t=Object.entries(e).filter(function(r){var s=je(r,2),a=s[0],o=s[1],u=!0;return Et(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),u=!1),(!Array.isArray(o)||!o.every(Ft))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),u=!1),u}).reduce(function(r,s){var a=je(s,2),o=a[0],u=a[1];return ft(ft({},r),{},jt({},o,u))},{});return[{description:"Files",accept:t}]}return e}function Mr(e){if(ue(e))return Object.entries(e).reduce(function(t,r){var s=je(r,2),a=s[0],o=s[1];return[].concat(ct(t),[a],ct(o))},[]).filter(function(t){return Et(t)||Ft(t)}).join(",")}function Ir(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function zr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Et(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ft(e){return/^.*\.[\w]+$/.test(e)}var $r=["children"],Br=["open"],Hr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Kr=["refKey","onChange","onClick"];function Ur(e){return Yr(e)||Gr(e)||Ot(e)||Wr()}function Wr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yr(e){if(Array.isArray(e))return Ke(e)}function ze(e,t){return Vr(e)||qr(e,t)||Ot(e,t)||Zr()}function Zr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(e,t){if(e){if(typeof e=="string")return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}}function Ke(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function qr(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],a=!0,o=!1,u,f;try{for(r=r.call(e);!(a=(u=r.next()).done)&&(s.push(u.value),!(t&&s.length===t));a=!0);}catch(g){o=!0,f=g}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw f}}return s}}function Vr(e){if(Array.isArray(e))return e}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gt(Object(r),!0).forEach(function(s){Ue(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){if(e==null)return{};var r=Jr(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Jr(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var Ge=i.forwardRef(function(e,t){var r=e.children,s=Ne(e,$r),a=Nt(s),o=a.open,u=Ne(a,Br);return i.useImperativeHandle(t,function(){return{open:o}},[o]),Rt.createElement(i.Fragment,null,r(C(C({},u),{},{open:o})))});Ge.displayName="Dropzone";var At={disabled:!1,getFilesFromEvent:cr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ge.defaultProps=At;Ge.propTypes={children:w.func,accept:w.objectOf(w.arrayOf(w.string)),multiple:w.bool,preventDropOnDocument:w.bool,noClick:w.bool,noKeyboard:w.bool,noDrag:w.bool,noDragEventsBubbling:w.bool,minSize:w.number,maxSize:w.number,maxFiles:w.number,disabled:w.bool,getFilesFromEvent:w.func,onFileDialogCancel:w.func,onFileDialogOpen:w.func,useFsAccessApi:w.bool,autoFocus:w.bool,onDragEnter:w.func,onDragLeave:w.func,onDragOver:w.func,onDrop:w.func,onDropAccepted:w.func,onDropRejected:w.func,onError:w.func,validator:w.func};var We={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Nt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=C(C({},At),e),r=t.accept,s=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,u=t.minSize,f=t.multiple,g=t.maxFiles,l=t.onDragEnter,v=t.onDragLeave,j=t.onDragOver,P=t.onDrop,k=t.onDropAccepted,N=t.onDropRejected,M=t.onFileDialogCancel,$=t.onFileDialogOpen,Z=t.useFsAccessApi,U=t.autoFocus,te=t.preventDropOnDocument,q=t.noClick,S=t.noKeyboard,W=t.noDrag,E=t.noDragEventsBubbling,I=t.onError,G=t.validator,L=i.useMemo(function(){return Mr(r)},[r]),re=i.useMemo(function(){return Lr(r)},[r]),V=i.useMemo(function(){return typeof $=="function"?$:ht},[$]),X=i.useMemo(function(){return typeof M=="function"?M:ht},[M]),F=i.useRef(null),_=i.useRef(null),ee=i.useReducer(Qr,We),fe=ze(ee,2),se=fe[0],T=fe[1],ve=se.isFocused,de=se.isFileDialogActive,B=i.useRef(typeof window<"u"&&window.isSecureContext&&Z&&Rr()),oe=function(){!B.current&&de&&setTimeout(function(){if(_.current){var p=_.current.files;p.length||(T({type:"closeDialog"}),X())}},300)};i.useEffect(function(){return window.addEventListener("focus",oe,!1),function(){window.removeEventListener("focus",oe,!1)}},[_,de,X,B]);var Y=i.useRef([]),ae=function(p){F.current&&F.current.contains(p.target)||(p.preventDefault(),Y.current=[])};i.useEffect(function(){return te&&(document.addEventListener("dragover",mt,!1),document.addEventListener("drop",ae,!1)),function(){te&&(document.removeEventListener("dragover",mt),document.removeEventListener("drop",ae))}},[F,te]),i.useEffect(function(){return!s&&U&&F.current&&F.current.focus(),function(){}},[F,U,s]);var z=i.useCallback(function(c){I?I(c):console.error(c)},[I]),J=i.useCallback(function(c){c.preventDefault(),c.persist(),ce(c),Y.current=[].concat(Ur(Y.current),[c.target]),Ce(c)&&Promise.resolve(a(c)).then(function(p){if(!(Ae(c)&&!E)){var A=p.length,R=A>0&&Sr({files:p,accept:L,minSize:u,maxSize:o,multiple:f,maxFiles:g,validator:G}),H=A>0&&!R;T({isDragAccept:R,isDragReject:H,isDragActive:!0,type:"setDraggedFiles"}),l&&l(c)}}).catch(function(p){return z(p)})},[a,l,z,E,L,u,o,f,g,G]),m=i.useCallback(function(c){c.preventDefault(),c.persist(),ce(c);var p=Ce(c);if(p&&c.dataTransfer)try{c.dataTransfer.dropEffect="copy"}catch{}return p&&j&&j(c),!1},[j,E]),h=i.useCallback(function(c){c.preventDefault(),c.persist(),ce(c);var p=Y.current.filter(function(R){return F.current&&F.current.contains(R)}),A=p.indexOf(c.target);A!==-1&&p.splice(A,1),Y.current=p,!(p.length>0)&&(T({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ce(c)&&v&&v(c))},[F,v,E]),b=i.useCallback(function(c,p){var A=[],R=[];c.forEach(function(H){var we=Dt(H,L),me=ze(we,2),ke=me[0],_e=me[1],Te=Ct(H,u,o),De=ze(Te,2),Re=De[0],Le=De[1],Me=G?G(H):null;if(ke&&Re&&!Me)A.push(H);else{var Ie=[_e,Le];Me&&(Ie=Ie.concat(Me)),R.push({file:H,errors:Ie.filter(function(_t){return _t})})}}),(!f&&A.length>1||f&&g>=1&&A.length>g)&&(A.forEach(function(H){R.push({file:H,errors:[Nr]})}),A.splice(0)),T({acceptedFiles:A,fileRejections:R,type:"setFiles"}),P&&P(A,R,p),R.length>0&&N&&N(R,p),A.length>0&&k&&k(A,p)},[T,f,L,u,o,g,P,k,N,G]),ie=i.useCallback(function(c){c.preventDefault(),c.persist(),ce(c),Y.current=[],Ce(c)&&Promise.resolve(a(c)).then(function(p){Ae(c)&&!E||b(p,c)}).catch(function(p){return z(p)}),T({type:"reset"})},[a,b,z,E]),d=i.useCallback(function(){if(B.current){T({type:"openDialog"}),V();var c={multiple:f,types:re};window.showOpenFilePicker(c).then(function(p){return a(p)}).then(function(p){b(p,null),T({type:"closeDialog"})}).catch(function(p){Ir(p)?(X(p),T({type:"closeDialog"})):zr(p)?(B.current=!1,_.current?(_.current.value=null,_.current.click()):z(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):z(p)});return}_.current&&(T({type:"openDialog"}),V(),_.current.value=null,_.current.click())},[T,V,X,Z,b,z,re,f]),y=i.useCallback(function(c){!F.current||!F.current.isEqualNode(c.target)||(c.key===" "||c.key==="Enter"||c.keyCode===32||c.keyCode===13)&&(c.preventDefault(),d())},[F,d]),D=i.useCallback(function(){T({type:"focus"})},[]),le=i.useCallback(function(){T({type:"blur"})},[]),ye=i.useCallback(function(){q||(Tr()?setTimeout(d,0):d())},[q,d]),ne=function(p){return s?null:p},be=function(p){return S?null:ne(p)},pe=function(p){return W?null:ne(p)},ce=function(p){E&&p.stopPropagation()},Se=i.useMemo(function(){return function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=c.refKey,A=p===void 0?"ref":p,R=c.role,H=c.onKeyDown,we=c.onFocus,me=c.onBlur,ke=c.onClick,_e=c.onDragEnter,Te=c.onDragOver,De=c.onDragLeave,Re=c.onDrop,Le=Ne(c,Hr);return C(C(Ue({onKeyDown:be(Q(H,y)),onFocus:be(Q(we,D)),onBlur:be(Q(me,le)),onClick:ne(Q(ke,ye)),onDragEnter:pe(Q(_e,J)),onDragOver:pe(Q(Te,m)),onDragLeave:pe(Q(De,h)),onDrop:pe(Q(Re,ie)),role:typeof R=="string"&&R!==""?R:"presentation"},A,F),!s&&!S?{tabIndex:0}:{}),Le)}},[F,y,D,le,ye,J,m,h,ie,S,W,s]),St=i.useCallback(function(c){c.stopPropagation()},[]),kt=i.useMemo(function(){return function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=c.refKey,A=p===void 0?"ref":p,R=c.onChange,H=c.onClick,we=Ne(c,Kr),me=Ue({accept:L,multiple:f,type:"file",style:{display:"none"},onChange:ne(Q(R,ie)),onClick:ne(Q(H,St)),tabIndex:-1},A,_);return C(C({},me),we)}},[_,r,f,ie,s]);return C(C({},se),{},{isFocused:ve&&!s,getRootProps:Se,getInputProps:kt,rootRef:F,inputRef:_,open:ne(d)})}function Qr(e,t){switch(t.type){case"focus":return C(C({},e),{},{isFocused:!0});case"blur":return C(C({},e),{},{isFocused:!1});case"openDialog":return C(C({},We),{},{isFileDialogActive:!0});case"closeDialog":return C(C({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return C(C({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return C(C({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return C({},We);default:return e}}function ht(){}const Xr=()=>{const e=xt(),t=ge(s=>s.auth.user),r=ge(s=>s.auth.accessToken);return or(async s=>await Lt(s),{onSuccess:s=>{e($e({user:{...t,coverPhoto:s.coverPhoto},accessToken:r}))}})},en=()=>{const[e,t]=i.useState(null),[r,s]=i.useState(!1),a=Xr();i.useEffect(()=>{O.dismiss(),a.isLoading?O.warn("Uploading...",K):a.isSuccess?O.success("Cover photo updated successfully",K):a.isError&&O.error("Updation failed!",K)},[a.isLoading,a.isSuccess,a.isError]);const o=async P=>{if(P)try{const k=new FormData,N=new FileReader;N.onload=M=>{var $;if(($=M.target)!=null&&$.result){const Z=M.target.result,U=new Blob([Z],{type:P.type});k.append("file",U,"image.jpg"),a.mutate(k)}},N.readAsArrayBuffer(P)}catch(k){console.error("Upload error:",k)}},u=P=>{o(P),f()},f=()=>s(!r),g=i.useCallback(P=>{(P==null?void 0:P.length)===0?O.error("Invalid action!",K):(t(P[0]),s(!0))},[e]),{getRootProps:l,getInputProps:v,isDragActive:j}=Nt({onDrop:g,maxFiles:1,accept:{"image/*":[]}});return n.jsxs(n.Fragment,{children:[n.jsx(Ee,{}),n.jsxs("div",{...l(),children:[n.jsx("input",{...v()}),!j&&n.jsxs("div",{className:" h-44 md:h-60 lg:h-80 px-1 cursor-pointer rounded-lg w-full bg-white lg:border-4 border-2 border-gray-500 border-dashed flex items-center justify-center gap-10",children:[n.jsx(Mt,{className:"lg:text-9xl text-6xl text-gray-500"}),n.jsxs("div",{className:"flex flex-col justify-center items-start",children:[n.jsx("h1",{className:"lg:text-[1.125rem] text-base",children:"Drag the image here or click to select the file"}),n.jsx("p",{className:"text-gray-500 font-light lg:text-base text-sm",children:"Multiple files are not allowed"})]})]})]}),n.jsxs(x.Dialog,{open:r,size:"lg",handler:f,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[n.jsx(x.DialogHeader,{children:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("div",{className:"text-2xl",children:"Cover Photo"}),n.jsx("div",{children:n.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:f})})]})}),n.jsx(x.DialogBody,{className:"lg:m-4 m-2",children:e?n.jsx("div",{className:"w-auto lg:h-[28rem] h-96 ",children:n.jsx(yt,{image:URL.createObjectURL(e),getImage:u,aspectRatio:4/1})}):" "})]})]})},tn=({id:e,ifOtherUser:t})=>{var m,h,b,ie;const r=ge(d=>{var y;return(y=d==null?void 0:d.auth)==null?void 0:y.user}),[s,a]=i.useState(null),[o,u]=i.useState(null),[f,g]=i.useState(!1),[l,v]=i.useState(null),[j,P]=i.useState(!1),[k,N]=i.useState(!1),[M,$]=i.useState(!1),[Z,U]=i.useState([]),[te,q]=i.useState([]),S=xt(),W=It();i.useEffect(()=>{const d=async()=>{if(r)e===(r==null?void 0:r._id)&&(a((r==null?void 0:r.coverPhoto)||null),u((r==null?void 0:r.dp)||null));else{const D=await y();e===(D==null?void 0:D._id)&&(D!=null&&D.coverPhoto&&a(D.coverPhoto),D!=null&&D.dp&&u(D.dp))}},y=async()=>{const{user:D}=await Ze(),{accessToken:le}=qe.getState().auth;return S($e({user:D,accessToken:le})),D};d()},[S,e,r]);const E=async d=>{try{const{otherUser:y}=await vt(d);v(y),y!=null&&y.coverPhoto&&a(y.coverPhoto),y!=null&&y.dp&&u(y.dp)}catch(y){if(Ht(y)){const D=y;D.response&&D.response.status>=400&&D.response.status<=500&&W("/error")}}};i.useEffect(()=>{var d;e!==(r==null?void 0:r._id)?(g(!0),t(!0),E(e),(d=r==null?void 0:r.following)!=null&&d.includes(e)?P(!0):P(!1)):(g(!1),t(!1))},[e,t,r]),i.useEffect(()=>{e&&zt(e).then(d=>{U(d.following)})},[e,k]),i.useEffect(()=>{e&&$t(e).then(d=>{q(d.followers)})},[e,M]);const[I,G]=i.useState(!1),L=()=>G(!I),[re,V]=i.useState(null),X=async d=>{if(d)try{const y=new FileReader;y.onload=async D=>{var le;if((le=D.target)!=null&&le.result){const ye=new FormData,ne=D.target.result,be=new Blob([ne],{type:d.type});ye.append("file",be,"image.jpg");const pe=qt(ye);await O.promise(pe,{pending:"Image is uploading.....",success:"Successfully updated Profile Photo",error:"Failed to update Profile Photo"},K).then(async ce=>{if(ce){u(ce.dp);const{user:Se}=await Ze();S($e({user:Se,accessToken:qe.getState().auth.accessToken}))}})}},y.readAsArrayBuffer(d)}catch(y){console.error("Upload error:",y)}},F=d=>{X(d),L()},_=d=>{d.target.files&&d.target.files.length>0&&(V(d.target.files[0]),G(!0))},ee=()=>{O.dismiss(),O(n.jsx(Je,{onDelete:()=>fe(),message:"Are you sure you want to delete this DP?"}),K)},fe=async()=>{(await Zt()).status==="success"?(O.dismiss(),O.success("DP deleted successfully",K)):(O.dismiss(),O.error("Error deleting the DP",K))},se=()=>s?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:s,className:"h-full rounded-lg w-full object-fit relative"}),!f&&n.jsx("div",{className:"absolute bottom-2 lg:bottom-4 right-4 lg:right-20",children:n.jsx("div",{className:"flex gap-3",children:n.jsx("div",{className:"flex justify-center items-center w-8 h-8 transition duration-300 ease-in-out bg-blue-gray-500 rounded-full cursor-pointer border-2 border-blue-gray-700 hover:border-red-700 hover:bg-white hover:border-3 group opacity-70 hover:opacity-100",children:n.jsx(Ve,{className:"text-xl text-white group-hover:text-red-500",onClick:ve})})})})]}):f?n.jsx("div",{className:"h-full w-full bg-gray-300 rounded-lg"}):n.jsx(en,{}),T=()=>o?n.jsxs("div",{className:"absolute -bottom-24 lg:left-14 p-4 hover:scale-105 group",children:[n.jsx("img",{className:"h-32 w-32 md:h-36 md:w-36 lg:h-40 lg:w-40 rounded-full border-4 border-white",src:o}),!f&&n.jsx("div",{className:"absolute bottom-7 left-16 md:left-[4.5rem] lg:left-[5rem]",children:n.jsx("div",{className:"flex gap-3",children:n.jsx("div",{className:`flex justify-center items-center w-8 h-8 transition duration-300 ease-in-out bg-blue-gray-500 rounded-full cursor-pointer border-2 
                border-blue-gray-700 hover:border-red-700 hover:bg-white group-hover:border-3 opacity-0 group-hover:opacity-100`,children:n.jsx(Ve,{className:"text-xl text-white hover:text-red-500",onClick:ee})})})})]}):f?n.jsx("div",{className:"absolute -bottom-24 lg:left-14 p-4 ",children:n.jsx("div",{className:"h-32 w-32 md:h-36 md:w-36 lg:h-40 lg:w-40 rounded-full border-2 lg:border-4 border-gray-500 border-dashed bg-white m-2 flex items-center justify-center",children:n.jsx(st,{className:"text-5xl text-gray-500 inline-flex"})})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"absolute -bottom-24 lg:left-14 p-4 ",children:[n.jsx("input",{type:"file",accept:"image/*",id:"image-input",className:"hidden",onChange:_}),n.jsx("label",{htmlFor:"image-input",className:"h-32 w-32 md:h-36 md:w-36 lg:h-40 lg:w-40 rounded-full border-4 border-gray-500 border-dashed bg-white m-2 flex items-center justify-center cursor-pointer",children:n.jsx(st,{className:"text-5xl text-gray-500 inline-flex"})})]}),n.jsxs(x.Dialog,{open:I,size:"lg",handler:L,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[n.jsx(x.DialogHeader,{children:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("div",{className:"text-2xl",children:"Profile Photo"}),n.jsx("div",{children:n.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:L})})]})}),n.jsx(x.DialogBody,{className:"lg:m-4 m-2",children:re?n.jsx("div",{className:"w-auto lg:h-[28rem] h-96 ",children:n.jsx(yt,{image:URL.createObjectURL(re),getImage:F,aspectRatio:4/4})}):" "})]})]}),ve=()=>{O.dismiss(),O(n.jsx(Je,{onDelete:de,message:"Are you sure you want to delete the cover photo?"}),K)},de=async()=>{(await Kt()).status==="success"?(O.dismiss(),O.success("Cover photo deleted successfully",K),a(null)):(O.dismiss(),O.error("Error deleting cover photo",K))},B=()=>{W(`/profile/${r==null?void 0:r._id}/settings`)},oe=()=>{W(`/profile/${r==null?void 0:r._id}/edit-profile`)},Y=async(d,y)=>{Ut(d).then(()=>{P(!1),O.dismiss(),O.success(`Following ${y}`,{...K,position:"bottom-left"}),S(Wt(d))})},ae=async(d,y)=>{Gt(d).then(()=>{P(!1),O.dismiss(),O.success(`Unfollowed ${y}`,{...K,position:"bottom-left"}),S(Yt(d))})},z=()=>N(!k),J=()=>$(!M);return n.jsxs(n.Fragment,{children:[n.jsx(Ee,{}),n.jsxs("div",{className:"relative w-full h-44 md:h-60 lg:h-80 px-1 lg:px-10",children:[se(),T(),n.jsxs("div",{className:"flex flex-col justify-between items-start absolute left-40 md:left-44 lg:left-64 -bottom-16",children:[n.jsxs("div",{className:"flex md:flex-row flex-col md:items-center md:gap-2",children:[n.jsx("h2",{className:"mt-2 lg:text-xl text-base font-bold text-black inline",children:f?l==null?void 0:l.name:r==null?void 0:r.name}),n.jsxs("p",{className:"text-sm font-light text-gray-600 md:mt-2",children:["@",f?l==null?void 0:l.username:r==null?void 0:r.username]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"lg:text-sm text-xs font-bold text-socioverse-500 cursor-pointer",onClick:z,children:[f?(m=l==null?void 0:l.following)==null?void 0:m.length:(h=r==null?void 0:r.following)==null?void 0:h.length," ","following"]}),n.jsxs("span",{className:"lg:text-sm text-xs font-bold text-socioverse-500 cursor-pointer",onClick:J,children:[f?(b=l==null?void 0:l.followers)==null?void 0:b.length:(ie=r==null?void 0:r.followers)==null?void 0:ie.length," ","followers"]})]})]}),n.jsx("div",{className:"md:flex items-center justify-between gap-5 absolute hidden md:-bottom-14 md:right-20",children:f?n.jsx(n.Fragment,{children:j?n.jsx(x.Button,{variant:"outlined",className:"rounded-full text-black border-black",onClick:()=>ae(e,l==null?void 0:l.name),children:"Following"}):n.jsx(x.Button,{className:"rounded-full bg-socioverse-500",onClick:()=>Y(e,l==null?void 0:l.name),children:"Follow"})}):n.jsxs(n.Fragment,{children:[n.jsx(x.Button,{variant:"outlined",className:"rounded-full text-black border-black",onClick:B,children:"Settings"}),n.jsx(x.Button,{className:"rounded-full bg-socioverse-500",onClick:oe,children:"Edit Profile"})]})}),n.jsx("div",{className:"flex md:hidden absolute right-0 -bottom-14",children:n.jsxs(x.Menu,{placement:"bottom-start",children:[n.jsx(x.MenuHandler,{children:n.jsx(x.Button,{color:"blue-gray",size:"sm",variant:"text",className:"focus:outline-none",children:n.jsx(Bt,{className:"text-lg transition duration-150 ease-in-out hover:scale-105"})})}),n.jsx(x.MenuList,{className:"z-50",children:f?j?n.jsx(x.MenuItem,{onClick:()=>ae(e,l==null?void 0:l.name),className:"hover:bg-blue-gray-50",children:"Unfollow"}):n.jsx(x.MenuItem,{onClick:()=>Y(e,l==null?void 0:l.name),className:"hover:bg-blue-gray-50",children:"Follow"}):n.jsxs(n.Fragment,{children:[n.jsx(x.MenuItem,{onClick:B,className:"hover:bg-blue-gray-50",children:"Settings"}),n.jsx(x.MenuItem,{onClick:oe,className:"hover:bg-blue-gray-50",children:"Edit Profile"})]})})]})})]}),n.jsxs(x.Dialog,{open:k,size:"xs",handler:z,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[n.jsx(x.DialogHeader,{children:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Following List"}),n.jsx("div",{children:n.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:z})})]})}),n.jsx(Ee,{}),n.jsx(x.DialogBody,{className:"flex flex-col gap-4 lg:mx-4 lg:my-0 m-2 max-h-[20.5rem] overflow-y-scroll",children:n.jsx("div",{className:"flex flex-col gap-2 ",children:Z.map(d=>n.jsx("div",{className:"flex p-2 items-center justify-between transition duration-100 ease-in-out hover:shadow-md hover:scale-105 hover:rounded-lg",children:n.jsxs("div",{className:"mt-3 flex items-center space-x-2",onClick:()=>{z(),W(`/profile/${d._id}`)},children:[n.jsx("img",{className:"inline-block h-12 w-12 rounded-full",src:d.dp?d.dp:Ye.DEFAULT_IMG,alt:"user dp"}),n.jsxs("span",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[14px] font-medium text-gray-900",children:d==null?void 0:d.name}),n.jsx("span",{className:"text-[11px] font-medium text-gray-500",children:d.username?`@${d.username}`:"@ -"})]})]})},d._id))})}),n.jsx(x.DialogFooter,{children:void 0})]}),n.jsxs(x.Dialog,{open:M,size:"xs",handler:J,animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[n.jsx(x.DialogHeader,{children:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Followers List"}),n.jsx("div",{children:n.jsx(Fe,{className:"text-3xl cursor-pointer",onClick:J})})]})}),n.jsx(Ee,{}),n.jsx(x.DialogBody,{className:"flex flex-col gap-4 lg:mx-4 lg:my-0 m-2 max-h-[20.5rem] overflow-y-scroll",children:n.jsx("div",{className:"flex flex-col gap-2 ",children:te.map(d=>n.jsx("div",{className:"flex p-2 items-center justify-between transition duration-100 ease-in-out hover:shadow-md hover:scale-105 hover:rounded-lg",children:n.jsxs("div",{className:"mt-3 flex items-center space-x-2",onClick:()=>{J(),W(`/profile/${d._id}`)},children:[n.jsx("img",{className:"inline-block h-12 w-12 rounded-full",src:d.dp?d.dp:Ye.DEFAULT_IMG,alt:"user dp"}),n.jsxs("span",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[14px] font-medium text-gray-900",children:d==null?void 0:d.name}),n.jsx("span",{className:"text-[11px] font-medium text-gray-500",children:d.username?`@${d.username}`:"@ -"})]})]})},d._id))})}),n.jsx(x.DialogFooter,{children:void 0})]})]})},rn=({id:e,otherUser:t})=>{const r=ge(o=>{var u;return(u=o==null?void 0:o.auth)==null?void 0:u.user}),[s,a]=i.useState(null);return i.useEffect(()=>{t&&e&&vt(e).then(o=>{a(o.otherUser)})},[e,t]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col w-full h-fit justify-start shadow-lg rounded-lg px-5 py-5 border overflow-auto whitespace-normal",children:[n.jsx("h2",{className:" lg:text-xl text-base font-bold text-black inline",children:"Bio"}),n.jsx("p",{className:"text-sm font-light text-gray-600 mt-2",children:t&&s?s==null?void 0:s.bio:r==null?void 0:r.bio})]}),n.jsxs("div",{className:`flex flex-col w-full h-fit justify-start shadow-lg rounded-lg px-5 py-5 
      border mt-8 overflow-auto whitespace-normal`,children:[n.jsx("h2",{className:" lg:text-xl text-base font-bold text-black inline mb-3",children:"Contact"}),n.jsxs("div",{className:"flex flex-col items-start justify-start gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-gray-100/50 flex items-center justify-center",children:n.jsx(Vt,{className:"text-xl text-socioverse-500"})}),n.jsx("p",{className:"text-sm font-light text-gray-600",children:t&&s?s==null?void 0:s.email:r==null?void 0:r.email})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-gray-100/50 flex items-center justify-center",children:n.jsx(Jt,{className:"text-xl text-socioverse-500"})}),n.jsx("p",{className:"text-sm font-light text-gray-600",children:t&&s?s==null?void 0:s.phoneNumber:r==null?void 0:r.phoneNumber})]})]})]})]})};function nn({userId:e}){const t=ge(m=>{var h,b;return(b=(h=m==null?void 0:m.auth)==null?void 0:h.user)==null?void 0:b._id}),[r,s]=i.useState([]),[a,o]=i.useState([]),[u,f]=i.useState([]),[g,l]=i.useState([]),[v,j]=i.useState(null),[P,k]=i.useState(null),[N,M]=i.useState(null),[$,Z]=i.useState(null),[U,te]=i.useState(null),[q,S]=i.useState(!1),[W,E]=i.useState(!1),[I,G]=i.useState(1),[L,re]=i.useState(1),[V,X]=i.useState(1),[F,_]=i.useState(1),[ee,fe]=i.useState("myPosts"),[se,T]=i.useState(!1),[ve,de]=i.useState(!1),B=i.useRef(null);i.useEffect(()=>{S(!1)},[e]),i.useEffect(()=>{I===1&&e===t&&(E(!0),oe(),E(!1))},[I,e,t]),i.useEffect(()=>{L===1&&e&&e!==t&&(E(!0),Y(),E(!1))},[L]),i.useEffect(()=>{v&&(s(r.filter(m=>m._id!==v)),f(u.filter(m=>m._id!==v)),l(g.filter(m=>m._id!==v)),j(null)),P&&k(null),N&&(s(r.map(m=>m._id===N._id?N:m)),f(u.map(m=>m._id===N._id?N:m)),l(g.map(m=>m._id===N._id?N:m)),M(null))},[v,P,N]),i.useEffect(()=>{$&&((async()=>{if($.action){const h=await rt($.postId);f([h.post,...u])}else f(u.filter(h=>h._id!==$.postId));Z(null)})(),Z(null)),U&&((async()=>{if(U.action){const h=await rt(U.postId);l([h.post,...g])}else l(g.filter(h=>h._id!==U.postId))})(),te(null))},[$,U]),i.useEffect(()=>{S(!1)},[ee]);const oe=async()=>{const m=await Qe(I);s(m.posts),G(I+1),m.posts.length<3&&S(!0)},Y=async()=>{if(e&&e!==t){const m=await Xe(e,I);o(m.posts),re(L+1),m.posts.length<3&&S(!0)}},ae=async m=>{if(E(!0),m==="saved"&&!ve){const h=await et(F);l(h.posts),_(F+1),de(!0)}else if(m==="liked"&&!se){const h=await tt(V);f(h.posts),X(V+1),T(!0)}E(!1)},z=[{label:"My Posts",value:"myPosts",desc:r.length>0?r:"No posts yet posted by the user"},{label:"Liked",value:"liked",desc:u.length>0?u:"No posts yet liked by the user"},{label:"Saved",value:"saved",desc:g.length>0?g:"No posts yet saved by the user"}],J=[{label:"My Posts",value:"myPosts",desc:a.length>0?a:"No posts yet posted by the user"}];return i.useEffect(()=>{const m=new IntersectionObserver(async h=>{if(h[0].isIntersecting&&!W&&!q){if(E(!0),e===t){if(ee==="myPosts"){const b=await Qe(I);if(b.posts.length===0){E(!1),S(!0);return}s([...r,...b.posts]),G(I+1)}else if(ee==="saved"){const b=await et(F);if(b.posts.length===0){E(!1),S(!0);return}l([...g,...b.posts]),_(F+1)}else if(ee==="liked"){const b=await tt(V);if(b.posts.length===0){E(!1),S(!0);return}f([...u,...b.posts]),X(V+1)}}else{const b=e&&await Xe(e,L);if(b&&b.posts.length===0){E(!1),S(!0);return}b&&o([...a,...b.posts]),re(L+1)}E(!1)}},{threshold:1});return B.current&&m.observe(B.current),()=>{B.current&&m.unobserve(B.current)}},[W,I,q,ee,e,L]),n.jsxs(x.Tabs,{id:"custom-animation",value:"myPosts",children:[n.jsx(x.TabsHeader,{className:"sticky overflow-y-hidden",children:(t===e?z:J).map(({label:m,value:h})=>n.jsx(x.Tab,{value:h,onClick:()=>{ae(h),fe(h)},children:n.jsx("h4",{className:"lg:text-base text-sm",children:m})},h))}),n.jsx(x.TabsBody,{animate:{initial:{y:250},mount:{y:0},unmount:{y:250}},className:"overflow-y-auto h-[80vh] no-scrollbar",children:(t===e?z:J).map(({value:m,desc:h})=>n.jsx(x.TabPanel,{value:m,className:"mx-auto",children:typeof h=="string"?n.jsx("h1",{className:"",children:h}):n.jsxs("div",{className:"flex flex-col gap-5 lg:w-[30rem] md:w-96 w-80 mx-auto",children:[h.map(b=>n.jsx(n.Fragment,{children:n.jsx(Qt,{postData:b,setDeletedPostId:j,setReportedPostId:k,setPostEdited:M,setSavedPostId:te,setLikedPostId:Z},b._id+m)})),!q&&n.jsx("div",{className:"w-full px-2 mt-5",children:n.jsx(Xt,{})}),q&&n.jsx("div",{className:"text-center mt-5",children:" No posts..."}),n.jsx("div",{id:"sentinel",style:{height:"1px"},className:"mt-10 mb-20",ref:B,children:!q&&n.jsx("img",{src:er,className:"w-20 h-20 mx-auto"})})]})},m))})]})}const sn=()=>{const e=tr(),t=ge(u=>{var f;return(f=u==null?void 0:u.auth)==null?void 0:f.user}),{userId:r}=rr(),[s,a]=i.useState(!1),o=u=>{a(u)};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex flex-col justify-evenly items-start lg:mx-5 ",children:[n.jsx("div",{className:" no-scrollbar overflow-y-hidden w-full lg:h-[26rem] md:h-80 h-64",children:n.jsx(tn,{id:r||null,ifOtherUser:o})}),n.jsxs("div",{className:"flex flex-col md:flex-row items-start w-full gap-5 md:h-[85vh] lg:h-[90vh]",children:[n.jsx("div",{className:nt("flex flex-col lg:px-10 px-2 w-full md:w-4/12 mt-8 sticky overflow-y-hidden md:h-[85vh]",{"hidden md:block":e.pathname===`/profile/${t==null?void 0:t._id}/settings`||e.pathname===`/profile/${t==null?void 0:t._id}/edit-profile`}),children:n.jsx(rn,{id:r||null,otherUser:s})}),n.jsx("div",{className:nt("flex flex-col lg:pr-10 w-full md:w-8/12 mt-8 sticky overflow-y-auto",{"h-[55vh] md:h-[60vh]":e.pathname===`/profile/${t==null?void 0:t._id}/settings`},{"h-[95vh] md:h-[90vh]":e.pathname===`/profile/${t==null?void 0:t._id}/edit-profile`},{"h-[80vh]":e.pathname===`/profile/${t==null?void 0:t._id}`}),children:e.pathname===`/profile/${t==null?void 0:t._id}/settings`&&t?n.jsx(nr,{}):e.pathname===`/profile/${t==null?void 0:t._id}/edit-profile`&&t?n.jsx("div",{className:"mb-10 overflow-y-hidden",children:n.jsx(sr,{})}):n.jsx("div",{className:"overflow-y-hidden no-scrollbar",children:n.jsx(nn,{userId:r})})})]})]})})},ln=()=>n.jsx(n.Fragment,{children:n.jsx(sn,{})});export{ln as default};
