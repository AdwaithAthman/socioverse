import{m,a as x,j as s,b as i,C as b,aE as N,u as v,at as w,r as o,aF as u,c as P,s as S,d as y,P as D,as as A,U as E}from"./index-7c9a26da.js";const I=({openAlert:a,handleOpenAlert:n,postId:l})=>{const r=m(),c=x();return s.jsxs(i.Dialog,{open:a,size:"md",handler:n,dismiss:{enabled:!1},animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[s.jsx(i.DialogHeader,{children:s.jsxs("div",{className:"flex justify-between items-center w-full",children:[s.jsx("div",{className:"text-2xl",children:"Login Alert"}),s.jsx("div",{})]})}),s.jsx(i.DialogBody,{className:"mx-4 mb-8",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"text-md w-full border-2 p-4 rounded-lg bg-red-50 border-red-500",children:"Inorder to view the post, user must be logged in."}),s.jsx("div",{className:"w-96 h-96 mb-4 px-4 md:px-0",children:s.jsx("img",{src:b.LOGIN_ALERT_SVG,alt:"login alert svg"})}),s.jsx(i.Button,{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto ",onClick:()=>{c(N(l)),r("/login")},children:"Login"})]})})]})},O=()=>{const a=x(),n=m(),l=v(e=>e.auth.user),{postId:r}=w(),[c,f]=o.useState(null),[h,d]=o.useState(!1),g=()=>{d(e=>!e)};o.useEffect(()=>(a(u(!0)),()=>{a(u(!1))}),[]),o.useEffect(()=>{j(r)},[r]),o.useEffect(()=>{l||p()||n("/error")},[l]);const p=async()=>{try{const{user:e}=await P(),{accessToken:t}=S.getState().auth;return a(y({user:e,accessToken:t})),e}catch(e){if(D(e)){const t=e;t.response&&t.response.status>=400&&t.response.status<=500&&d(!0)}}},j=async e=>{const t=await A(e);t.post?f(t.post):n("/error")};return s.jsxs(s.Fragment,{children:[c&&s.jsx("div",{className:`flex items-center justify-center lg:w-[30rem] 
          md:w-96 w-80 mx-auto mt-8`,children:s.jsx(E,{postData:c})}),s.jsx(I,{openAlert:h,handleOpenAlert:g,postId:r})]})};export{O as default};
