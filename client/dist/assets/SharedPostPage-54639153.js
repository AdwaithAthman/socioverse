import{m,a as x,j as e,b as i,C as b,aF as N,u as v,au as w,r as o,aG as u,c as P,s as S,d as y,P as D,at as A,U as I}from"./index-cbb70753.js";const E=({openAlert:a,handleOpenAlert:n,postId:l})=>{const r=m(),c=x();return e.jsxs(i.Dialog,{open:a,size:"md",handler:n,dismiss:{enabled:!1},animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:[e.jsx(i.DialogHeader,{children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("div",{className:"text-2xl",children:"Login Alert"}),e.jsx("div",{})]})}),e.jsx(i.DialogBody,{className:"mx-4 mb-8",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-md w-full border-2 p-4 rounded-lg bg-red-50 border-red-500",children:"Inorder to view the post, user must be logged in."}),e.jsx("div",{className:"w-96 h-96 mb-4 px-4 md:px-0",children:e.jsx("img",{src:b.LOGIN_ALERT_SVG,alt:"login alert svg"})}),e.jsx(i.Button,{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto ",onClick:()=>{c(N(l)),r("/login")},children:"Login"})]})})]})},O=()=>{const a=x(),n=m(),l=v(s=>s.auth.user),{postId:r}=w(),[c,f]=o.useState(null),[h,d]=o.useState(!1),g=()=>{d(s=>!s)};o.useEffect(()=>(a(u(!0)),()=>{a(u(!1))}),[]),o.useEffect(()=>{j(r)},[r]),o.useEffect(()=>{l||p()||n("/error")},[l]);const p=async()=>{try{const{user:s}=await P(),{accessToken:t}=S.getState().auth;return a(y({user:s,accessToken:t})),s}catch(s){if(D(s)){const t=s;t.response&&t.response.status>=400&&t.response.status<=500&&d(!0)}}},j=async s=>{const t=await A(s);t.post?f(t.post):n("/error")};return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:`flex items-center justify-center lg:w-[30rem] 
          md:w-96 w-80 mx-auto mt-8`,children:e.jsx(I,{postData:c})}),e.jsx(E,{openAlert:h,handleOpenAlert:g,postId:r})]})};export{O as default};
